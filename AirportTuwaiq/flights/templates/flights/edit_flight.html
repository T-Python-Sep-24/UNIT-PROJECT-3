{% extends "main/base.html" %}

{% block title %}Edit Flight{% endblock %}

{% block content %}
<div class="container my-5">
    <h1 class="text-center mb-4">
        <i class="fas fa-edit"></i> Edit Flight
    </h1>

    <div class="card mx-auto p-4" style="max-width: 600px;">
        <form method="post" action="{% url 'flights:edit_flight_view' flight.id %}" class="d-flex flex-column">
            {% csrf_token %}

            <!-- Flight Number -->
            <div class="mb-3">
                <label for="flight_number" class="form-label"><i class="fas fa-ticket-alt"></i> Flight Number</label>
                <input type="text" class="form-control" id="flight_number" name="flight_number" value="{{ flight.flight_number }}" required>
            </div>

            <!-- Origin City -->
            <div class="mb-3">
                <label for="from_city" class="form-label"><i class="fas fa-map-marker-alt"></i> Origin City</label>
                <select class="form-select" id="from_city" name="from_city" required>
                    <option value="" disabled>Select Origin City</option>
                    <option value="Riyadh" {% if flight.from_city.name == "Riyadh" %}selected{% endif %}>Riyadh</option>
                    <option value="Abha" {% if flight.from_city.name == "Abha" %}selected{% endif %}>Abha</option>
                    <option value="Dammam" {% if flight.from_city.name == "Dammam" %}selected{% endif %}>Dammam</option>
                    <option value="Jeddah" {% if flight.from_city.name == "Jeddah" %}selected{% endif %}>Jeddah</option>
                </select>
            </div>
            
            <div class="mb-3">
                <label for="to_city" class="form-label"><i class="fas fa-map-marker-alt"></i> Destination City</label>
                <select class="form-select" id="to_city" name="to_city" required>
                    <option value="" disabled>Select Destination City</option>
                    <option value="Riyadh" {% if flight.to_city.name == "Riyadh" %}selected{% endif %}>Riyadh</option>
                    <option value="Abha" {% if flight.to_city.name == "Abha" %}selected{% endif %}>Abha</option>
                    <option value="Dammam" {% if flight.to_city.name == "Dammam" %}selected{% endif %}>Dammam</option>
                    <option value="Jeddah" {% if flight.to_city.name == "Jeddah" %}selected{% endif %}>Jeddah</option>
                </select>
            </div>

            <!-- Departure Time -->
            <div class="mb-3">
                <label for="departure_time" class="form-label"><i class="fas fa-clock"></i> Departure Time</label>
                <input type="datetime-local" class="form-control" id="departure_time" name="departure_time" value="{{ flight.departure_time|date:'Y-m-d\\TH:i' }}" required>
            </div>

            <!-- Arrival Time -->
            <div class="mb-3">
                <label for="arrival_time" class="form-label"><i class="fas fa-clock"></i> Arrival Time</label>
                <input type="datetime-local" class="form-control" id="arrival_time" name="arrival_time" value="{{ flight.arrival_time|date:'Y-m-d\\TH:i' }}" required>
            </div>

            <!-- Price -->
            <div class="mb-3">
                <label for="price" class="form-label"><i class="fas fa-money-bill-wave"></i> Price (SAR)</label>
                <input type="number" class="form-control" id="price" name="price" value="{{ flight.price }}" required>
            </div>

            <!-- Available Seats -->
            <div class="mb-3">
                <label for="available_seats" class="form-label"><i class="fas fa-chair"></i> Available Seats</label>
                <input type="number" class="form-control" id="available_seats" name="available_seats" value="{{ flight.available_seats }}" required>
            </div>

            <!-- Submit Button -->
            <div class="d-flex justify-content-between mt-4">
                <a href="{% url 'flights:flight_detail_view' flight.id %}" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
